#remove diagmenu with 1 sec. press at clock in display settings menu, script made by Sumire_Racing_JPN
show_message "REMOVE DIAGMENU W. 1 SEC. PRESS AT CLOCK IN DISPLAY SETTINGS MENU"
log_message "REMOVE DIAGMENU W. 1 SEC. PRESS AT CLOCK IN DISPLAY SETTINGS MENU ..."
cp /jci/gui/apps/diag/js/diagApp.js ${MYDIR}/diagApp_diagmenu-before.js
cp /jci/gui/common/controls/StatusBar/js/StatusBarCtrl.js ${MYDIR}/StatusBarCtrl_diagmenu-before.js
cp /jci/gui/common/js/Common.js ${MYDIR}/Common_diagmenu-before.js
if grep -Fq '"settleTime" : 20000,' /jci/gui/apps/diag/js/diagApp.js
	then
		echo "exist"
		log_message "=== /jci/gui/apps/diag/js/diagApp.js was not modified ==="
	else
		sed -i 's/"settleTime" : 1000,/"settleTime" : 20000,/g' /jci/gui/apps/diag/js/diagApp.js
		log_message "=== Modified /jci/gui/apps/diag/js/diagApp.js ==="
		break
fi
if grep -Fq '"holdTimeout" : 5000,' /jci/gui/common/controls/StatusBar/js/StatusBarCtrl.js
	then
		echo "exist"
		log_message "=== /jci/gui/common/controls/StatusBar/js/StatusBarCtrl.js was not modified ==="
	else
		sed -i 's/"holdTimeout" : 1000,/"holdTimeout" : 5000,/g' /jci/gui/common/controls/StatusBar/js/StatusBarCtrl.js
		log_message "=== Modified /jci/gui/common/controls/StatusBar/js/StatusBarCtrl.js ==="
		break
fi
if grep -Fq 'framework.sendEventToMmui("syssettings", "SelectDiagnostics"); // Sumire Racing' /jci/gui/common/js/Common.js
	then
		sed -i '/Sumire Racing/d' /jci/gui/common/js/Common.js
		log_message "=== Modified /jci/gui/common/js/Common.js to original ==="
	else
		log_message "=== /jci/gui/common/js/Common.js was not modified ==="
		break
fi
cp /jci/gui/apps/diag/js/diagApp.js ${MYDIR}/diagApp_diagmenu-after.js
cp /jci/gui/common/controls/StatusBar/js/StatusBarCtrl.js ${MYDIR}/StatusBarCtrl_diagmenu-after.js
cp /jci/gui/common/js/Common.js ${MYDIR}/Common_diagmenu-after.js
log_message "END REMOVING DIAGMENU WITH 1 SEC. PRESS AT CLOCK IN DISPLAY SETTINGS MENU"
log_message " "
